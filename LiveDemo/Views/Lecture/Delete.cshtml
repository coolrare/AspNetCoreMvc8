@model LiveDemo.Models.Course

@{
    ViewData["Title"] = "Delete";
}

<h1>Delete Lecture</h1>
<h4>Lecture</h4>

<div class="form-group">
    <label asp-for="Title" class="control-label"></label>
    <input asp-for="Title" class="form-control" readonly />
</div>
<div class="form-group">
    <label asp-for="Credits" class="control-label"></label>
    <input asp-for="Credits" class="form-control" readonly />
</div>
<div class="form-group">
    <label asp-for="Description" class="control-label"></label>
    <input asp-for="Description" class="form-control" readonly />
</div>
<div class="form-group">
    <label asp-for="Department.Name" class="control-label"></label>
    <input asp-for="Department.Name" class="form-control" readonly />
</div>

<input type="hidden" id="CourseId" value="@Model.CourseId" />
<button id="deleteButton" class="btn btn-danger">Delete</button> |
<a asp-action="Index">Back to List</a>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
                        $(document).ready(function() {
                            $("#deleteButton").click(function() {
                                if (confirm("確定要刪除嗎？")) {
                                    var courseId = $("#CourseId").val();
                                    deleteLecture(courseId)
                                        .then(function(result) {
                                            alert('Lecture deleted successfully.');
                                        })
                                        .catch(function() {
                                            alert('An error occurred while deleting the lecture.');
                                        });
                                }
                            });
                        });

                        function deleteLecture(courseId) {
                            return new Promise(function(resolve, reject) {
                                $.ajax({
                                    url: "/members/Lecture/Delete/" + courseId,
                                    type: "DELETE",
                                    success: function(result) {
                                        resolve(result);
                                    },
                                    error: function() {
                                        reject();
                                    }
                                });
                            });
                        }
                    </script>
                }
   